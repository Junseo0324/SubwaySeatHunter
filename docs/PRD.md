
# 지하철 좌석 헌터

## 1. 제품 개요

### 1.1 제품명

**지하철 좌석 헌터 (Subway Seat Hunter)**

### 1.2 제품 비전

출퇴근 지하철에서 "앉아서 갈 확률"을 높여주는 데이터 기반 스마트 추천 서비스

### 1.3 목표 사용자

- 20-40대 직장인 출퇴근자
- 장거리 지하철 통근자 (30분 이상)
- 체력적으로 서서 가기 힘든 사용자 (임산부, 노약자)
- 통근 시간 최적화에 관심 있는 사용자

### 1.4 핵심 가치 제안

- "지금 탈까, 다음 열차 탈까?" → 데이터 기반 추천
- "몇 번 칸에 타야 앉을 확률이 높을까?" → 통계 기반 칸 추천
- "언제 출발하면 쾌적하게 갈까?" → 시간대별 혼잡도 분석

---

## 2. 문제 정의

### 2.1 현재 문제점

1. 기존 지하철 앱은 "언제 오는지"만 알려줄 뿐, "얼마나 혼잡한지"는 모름
2. 막연히 "다음 열차가 덜 혼잡하겠지"하고 기다리다가 더 혼잡한 열차를 탐
3. 어느 칸에 타야 앉을 확률이 높은지 알 수 없음
4. 출근 시간을 조절할 수 있는데도 최적 타이밍을 모름

### 2.2 해결 방안

공공 빅데이터 분석을 통한 혼잡도 예측 및 최적 탑승 전략 제공

---

## 3. 제품 범위

### 3.1 MVP (4주)

**목표**: 핵심 기능으로 실사용 가능한 프로토타입

### 포함 기능

- 역 검색 및 선택
- 현재 시간 기준 혼잡도 표시
- 실시간 도착 열차 혼잡도 예측
- 칸별 추천 (통계 기반)
- 다음 열차 대기 추천

### 제외 기능

- 회원가입/로그인
- 즐겨찾기
- 히스토리
- 푸시 알림

---

## 4. 핵심 기능 명세

### 4.1 메인 화면

**목적**: 빠른 정보 확인 및 의사결정 지원

### UI 구성

```
┌─────────────────────────────┐
│  🎯 지하철 좌석 헌터          │
├─────────────────────────────┤
│  📍 현재 위치: 강남역          │
│  🚇 2호선 외선 (선릉 방향)     │
├─────────────────────────────┤
│  ⏱️ 지금 오는 열차 (2분 후)   │
│  혼잡도: 🔴 매우 혼잡 (140%)  │
│  앉을 확률: ⭐️ 10%           │
│                              │
│  [다음 열차 보기] (5분 후)    │
├─────────────────────────────┤
│  💡 추천 전략                 │
│  • 5분만 기다리면 혼잡도 90%  │
│  • 3-4번 칸 추천 (환승 반대편)│
│  • 선릉역 도착 시 12명 하차   │
└─────────────────────────────┘

```

### 기능 요구사항

- 사용자 현재 위치 자동 감지 (GPS)
- 가장 가까운 역 자동 표시
- 실시간 도착 정보 자동 갱신 (30초마다)
- 혼잡도 색상 코드 (초록/노랑/주황/빨강)
- 원탭으로 방향 전환 (상행선 ↔ 하행선)

### 4.2 칸별 추천 화면

**목적**: 어느 칸에 탈지 시각적으로 안내

### UI 구성

```
┌─────────────────────────────┐
│  🚇 2호선 10량 편성           │
├─────────────────────────────┤
│  [1] [2] [3] [4] [5]         │
│   🟢  🟡  🔴  🔴  🟡         │
│                              │
│  [6] [7] [8] [9] [10]        │
│   🟡  🔴  🔴  🟡  🟢         │
├─────────────────────────────┤
│  💡 3번 칸 추천!              │
│  • 혼잡도 예상: 80%           │
│  • 다음 역 하차 예상: 5명     │
│  • 앉을 확률: 45%             │
│                              │
│  📍 역 내 위치 안내           │
│  3번 출구 계단에서 가장 가까워요│
└─────────────────────────────┘

```

### 기능 요구사항

- 10량/8량/6량 편성 자동 감지
- 칸별 혼잡도 색상 표시
- 탭하면 해당 칸 상세 정보
- 역 내 지도 연동 (어디서 대기해야 하는지)
- 환승 연결 칸 표시

### 4.3 시간대별 분석 화면

**목적**: 출근 시간 조정 가능한 사용자에게 최적 타이밍 제공

### UI 구성

```
┌─────────────────────────────┐
│  📊 강남역 → 선릉역            │
│  평일 출근 시간대 분석         │
├─────────────────────────────┤
│  혼잡도                       │
│  200%│     ╱╲               │
│  150%│    ╱  ╲              │
│  100%│   ╱    ╲___          │
│   50%│__╱         ╲__       │
│      └─────────────────      │
│      7:00  8:00  9:00 10:00 │
├─────────────────────────────┤
│  💡 추천 출발 시간            │
│  • 1순위: 7:42 (혼잡도 65%)  │
│  • 2순위: 9:15 (혼잡도 70%)  │
│  • 피할 시간: 8:20-8:50      │
└─────────────────────────────┘

```

### 기능 요구사항

- 과거 30일 평균 혼잡도 그래프
- 요일별 필터 (평일/토요일/일요일)
- 시간대 선택 시 상세 정보 팝업
- "내 출근 시간" 저장 기능

### 4.4 역 검색 화면

**목적**: 빠르게 원하는 역 찾기

### 기능 요구사항

- 자동완성 검색
- 최근 검색 역 저장
- 현재 위치 기반 근처 역 목록
- 호선별 필터링
- 즐겨찾기 역 (Phase 2)

---

### 5.3 데이터 소스

| 데이터 | 소스 | 형식 | 갱신 주기 |
| --- | --- | --- | --- |
| 혼잡도 통계 | 공공데이터포털 | CSV → Room DB | 분기별 (앱 업데이트로 배포) |
| 실시간 도착 | 공공데이터 API | REST API → Retrofit | 30초마다 (Coroutine) |
| 승하차 인원 | 공공데이터포털 | CSV → Room DB | 월별 (앱 업데이트로 배포) |
| 역 정보 | 공공데이터포털 | CSV → Room DB | 초기 설치 시 1회 로드 |
| 사용자 설정 | 로컬 | DataStore (Preferences) | 실시간 |

## 6. 데이터 요구사항

### 6.1 필수 데이터셋

1. **서울교통공사 지하철혼잡도정보.csv**
    - 크기: 약 50MB
    - 로컬 IndexedDB 저장
    - 분기별 수동 업데이트
2. **역 정보 마스터 데이터 - csv**
    - 역명, 호선, 좌표, 출구 정보
    - 약 5MB
    - 초기 로드 시 1회
3. **서울시 지하철 실시간 도착정보**

### 6.2 API 호출 전략

```
실시간 도착정보 API:
- 사용자가 화면 볼 때만 호출
- 30초 캐싱
- 최대 일 500회 호출 예상 (사용자당)
- 공공데이터 일 1,000건 제한 → 충분

카카오맵 API:
- 지도 로드: 페이지당 1회
- 좌표 검색: 캐싱으로 최소화
- 일 300,000건 무료 → 여유

```

---

## 7. UI/UX 원칙

### 7.1 디자인 원칙

1. **3초 안에 의사결정 가능하게**
    - 핵심 정보만 메인 화면에
    - "탈까 말까" 즉시 판단 가능
2. **색상 코드 일관성**
    - 🟢 초록: 쾌적 (0-80%)
    - 🟡 노랑: 보통 (80-100%)
    - 🟠 주황: 혼잡 (100-130%)
    - 🔴 빨강: 매우 혼잡 (130%+)
3. **모바일 최우선**
    - 한손으로 조작 가능
    - 큰 터치 영역
    - 가로 모드 불필요
4. **오프라인 동작**
    - 혼잡도 통계는 로컬 저장
    - 실시간 정보 없어도 예측 제공

### 7.2 핵심 지표

- 앱 초기 로딩 시간: < 2초
- 화면 전환 애니메이션: 60 FPS 유지
- Room DB 쿼리 시간: < 100ms
- API 응답 대기 시간: < 3초 (타임아웃)
- 오프라인에서도 90% 기능 작동
- APK 크기: < 15MB

---

## 9. 위험 요소 및 대응

### 9.1 기술적 위험

| 위험 | 영향도 | 대응 방안 |
| --- | --- | --- |
| API 호출 제한 초과 | 높음 | Room DB 캐싱 강화, WorkManager로 백그라운드 동기화, 공공데이터포털 활용사례 등록 |
| CSV 데이터 오래됨 | 중간 | 사용자 피드백으로 보정, Google Play 앱 업데이트로 분기별 자동 배포 |
| 실시간 API 장애 | 중간 | Room 캐시 기반 예측으로 대체, Snackbar로 장애 안내 |
| Room DB 마이그레이션 | 낮음 | 버전 관리 철저, fallbackToDestructiveMigration 최소화 |
| ANR (Application Not Responding) | 중간 | 모든 DB/네트워크 작업 Coroutine으로 비동기 처리 |

### 9.2 제품적 위험

| 위험 | 영향도 | 대응 방안 |
| --- | --- | --- |
| 혼잡도 예측 부정확 | 높음 | 사용자 피드백 수집, 기계학습 모델 개선 |
| 사용자 획득 실패 | 높음 | 지하철 커뮤니티 타겟 마케팅, 인플루언서 협업 |
| 경쟁 서비스 등장 | 중간 | 차별화된 UX, 커뮤니티 기능 강화 |

---

## 11. 향후 로드맵

- 위젯 지원 (홈 화면에서 바로 확인)

## 12. 부록

### 12.1 참고 자료

- 공공데이터포털: https://www.data.go.kr
- 서울 열린데이터광장: https://data.seoul.go.kr